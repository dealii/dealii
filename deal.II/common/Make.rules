

############################################################
# Include general settings for including DEAL libraries
############################################################

include $D/common/Make.global_options


############################################################
# Targets for compilation
############################################################

ifneq ($(with-multithreading),no)
  MT = MT
else
  MT = ==
endif

%.g.o : %.cc
	@echo =====debug======$(MT)== $<
	@$(CXX) $(CXXFLAGS.g) $(CXXFLAGS) -c $< -o $@
%.o : %.cc
	@echo =====optimized==$(MT)== $<
	@$(CXX) $(CXXFLAGS.o) $(CXXFLAGS) -c $< -o $@

############################################################
# Automatic generation of dependencies
############################################################

all-cc-files = $(shell echo *.cc)

Makefile.depend: $(all-cc-files)
	@echo =====Dependencies== Makefile.depend
	@$(CXX) $(flags) $^ -M > $@
	@perl -pi~ -e 's/(^[^.]+)\.o:/\1.o \1.g.o:/;' $@

include Makefile.depend
