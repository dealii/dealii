<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Frameset//EN"
   "http://www.w3.org/TR/REC-html40/frameset.dtd">
<html>
  <head>
    <link href="screen.css" rel="StyleSheet" media="screen">
    <link href="print.css" rel="StyleSheet" media="print">
    <title>The deal.II Readme</title>
    <meta name="author" content="the deal.II authors <authors@dealii.org>">
    <meta name="keywords" content="deal.II">
  </head>

  <body>


    <h1>Installation instructions and further information 
        on <acronym>deal.II</acronym> </h1>

    <p>	
    This document contains the following sections:
    </p>
    <ul>
      <li> <a href="#prerequisites">System requirements</a>
      <li> <a href="#installation">Installation</a>
      <li> <a href="#compiler-flags">Compiler flags</a>
      <li> <a href="#external-libs">Using third-party libraries and
             subroutines</a>
      <li> <a href="#problems">Problems, questions, mailing lists</a>
      <li> <a href="#license">License</a>
    </ul>


    
    <a name="prerequisites">
    <h2>System requirements</h2>

    <p>
    At present, <acronym>deal.II</acronym> has been
    developed and tested on Unix or Unix-like systems only. It can be
    used positively on
    <ul>
      <li>Linux on x86, with gcc 2.95, 3.0, 3.1/3.2, 3.3 or 3.4; and Intel ICC
          6.0, 7.0, 7.1 and 8.0;
      <li>Sun Solaris 2.5, 2.6, 7, 8, and 9 on Sparc, with gcc 2.95,
          gcc 3.0, and gcc 3.1/3.2; 
      <li>Sun Solaris 9 on Sparc in 64bit mode, with gcc 3.1.1/3.2;
      <li>Sun Solaris 8 on x86, with gcc 2.95;
      <li>FreeBSD 4.5 on x86, with gcc 2.95;
      <li>IBM AIX 5.1 on Power4, with gcc 3.2 and gcc 3.3;
      <li>IBM AIX 4.2, with gcc 2.95 (with some restrictions on
          the use of shared libraries);
      <li>SGI IRIX64, with MIPSpro 7.41;
      <li>Linux on HP/Compaq Alpha with gcc 2.95 (courtesy of 
          <a href="http://testdrive.hp.com">testdrive.hp.com</a>);
      <li>Linux on HPPA PA-RISC with gcc 3.0 (with some restrictions on
          the use of shared libraries; courtesy of 
          <a href="http://testdrive.hp.com">testdrive.hp.com</a>);
      <li>Mac OS X 10.2 with gcc 3.x (with some restrictions on
          the use of shared libraries).
    </ul>
    Furthermore, for the following list of systems, we have collected
    our experiences on separate pages:
    <ul>
      <li> For gcc 2.96 on RedHat Linux systems, see the <a
           href="faq.html#gcc296" target="body">Frequently Asked
           Questions</a>;

      <li> <a href="platforms/sgi-irix.html" target="body">SGI
           IRIX64</a> with gcc 2.95.x, 3.2, 3.3 and 3.4, and with MIPSpro 7.41;

      <li> <a href="platforms/dec-osf5.html" target="body">OSF1 V5.3 on
           Alpha</a> with gcc 2.95.x (the same notes probably also apply
           to Linux on DEC Alpha) and using DEC's cxx compiler version
           6.3; for older systems with OSF1 4.0 and cxx6.0 please see
	   <a href="platforms/dec-osf.html" target="body">this page</a>.

      <li> <a href="platforms/ibm_aix_xlc.html" target="body">IBM AIX
           with IBM's xlC 5.0 and 6.0 compilers</a>.

      <li> <a href="platforms/pgcc.html" target="body">Portland Group
           PGCC 3.x and 4.x on x86 Linux</a>.

      <li> <a href="platforms/windows.html" target="body">Microsoft
           Windows 95/98/2000/NT</a>.

      <li> <a href="platforms/bcc.html" target="body">Borland C++/Kylix</a>.
    </ul>
    </p>

    <p>
    <acronym>deal.II</acronym> uses only very few features of an
    operating system. It should therefore be rather simple to port it
    to other systems, at least with the compilers stated above. If
    your system is not on this list, take a look at the page that
    describes <a href="porting.html" target="body">porting the library
    to new systems</a>.
    </p>

    <p>
    </p>

    <p>
    In order to compile and use the <acronym>deal.II</acronym>
    libraries you need to have the following programs installed:
    <ul>
      <li> <p>
           A fairly complete C++ compiler. We usually use 
           <a href="http://gcc.gnu.org" target="_top">gcc2.95 or
           gcc3.x</a> but also some others. Various working compilers
           are listed above. egcs1.x and older gcc versions will not
           work, however. For gcc 2.96, see the <a href="faq.html#gcc296"
           target="body">Frequently Asked Questions</a>. Also, Sun 
           Workshop C++ 5.0 will not work since it does not support
           template member functions, Sun Forte C++ 5.5 will not work since it
           does not understand a number of other advanced template features,
	   and IBM C Set++ 3.0 will not
           work since they only have non-ISO header file names (with
           appended .h. Version 5.0 does not work since they do not
           allow the declaration of explicit specializations and a
           larger number of other techniques that are used in the
           library, see the link in the list above. The SGI MIPSpro
           compiler 7.3 or earlier will not work since it is not C++
           standard conforming. The MIPSpro compiler 7.4 will also not
           work since it is still too buggy.
	   </p>

	   <p>
	   Note that we have supported egcs 1.1.x in previous releases
           of the library (up to <acronym>deal.II</acronym> 3.0.x),
           but due to some missing feature in the support of Standard
           C++, we now only support later versions of gcc for releases
           of <acronym>deal.II</acronym> after version 3.0.x. Beyond
           that, we frequently compile <acronym>deal.II</acronym> with
           newer gcc snapshots, to ensure that the library will
           compile with upcoming releases.
	   </p>

	   <p>
           We are interested in writing portable C++, so if you find
           something that does not work with your compiler, we are
           likely to accept patches.
	   </p>

      <li> <p>
           Perl: any Perl 5.x version should work.
	   </p>

      <li> <p> 
           Make: we use <a href="http://www.gnu.org"
           target="_top">GNU make</a>, version 3.78 or later which also
           has rather good support for parallel builds, so you may
           want to consider this version if you have a multiprocessor
           system. GNU make 3.77 had a serious flaw in the
           <code>$(wildcard ...)</code> function which prevented us
           from compiling some parts of the library (most of our
           Makefiles use a workaround, though). Older GNU make
           versions are likely to work, but since they are hardly
           installed on systems today, we don't regularly test
           this. Other make programs (i.e. non-GNU) will usually fail
           to work and are not supported.
	   </p>

      <li> <p>
           For debugging programs, we have found that the
	   <a href="http://www.gnu.org" target="_top">GNU
	   debugger gdb</a> is a valuable tool. However, it is noted
           that gdb 4.18 is quite broken with respect to debugging C++
           programs. A better choice is to use the older version 4.17
           which works well, or 5.0 or later. If you want to debug
           multithreaded programs, you may want to use gdb 5.0 or
           later, since gdb 4.17 did not support multiple threads too
           well.
	   </p>

      <li> <p>
           In case you want to generate the documentation from the
           header files, you need a copy of <a href="http://www.doxygen.org/"
           target="_top">doxygen</a> on your machine (we use 
           version 1.3.2, later versions will presumably work as well). If you
           have this program, you can generate all the API documentation on
	   your local machine. If not, you can still work with the library and
	   use the documentation provided on our homepage for reference. Note
           that in order to generate inheritance graphs for classes, doxygen
           can use the <code>dot</code> program, which is part of the <a
           href="http://www.graphviz.org" target="_top">GraphViz</a>
           package. If this program is not available, then doxygen attempts to
           generate text-mode graphs; these are much less nice, though.
	   </p>

      <li> <p>
           Doxygen also generates printable API documentation. It is located
           in the directories <code>doc/doxygen/LaTeX</code> and
           subdirectories. To generate printable versions, you need a latex
           installation. However, the present size of this API information is
           about 1500 pages, so you may not want to print it, and rather rely
           on the online version. The more interesting part of the
           documentation to print would probably be the example programs, but
           we don't presently have a way to do that apart from printing it
           directly from the browser or by using the <code>html2ps</code>
           program.
	   </p>

      <li> <p>
           The library generates output in formats readable by
           <a href="http://www.ucc.ie/gnuplot/gnuplot-faq.html" target="_top">GNUPLOT</a>, 
	   <a href="http://www-xdiv.lanl.gov/XCM/gmv/" target="_top">GMV
 	                              (general mesh viewer)</a>, 
	   <a href="http://www.amtec.com" target="_top">Tecplot</a> (ASCII and binary), 
           <a href="http://www.kitware.com/vtk.html"
                 target="_top">Visualization Toolkit (Vtk)</a>,
	   <a href="http://www.avs.com" target="_top">AVS Explorer</a>,
	   <a href="http://www.opendx.org" target="_top">Open DX</a>,
	   <a href="http://www.povray.org" target="_top">Povray</a>,
	   <a href="http://gaia.iwr.uni-heidelberg.de/~heuvelin/HiFlowProject/HiVision/index.html" target="_top">HiVision</a>,
           and directly to Encapsulated Postscript. GNUPLOT and a
           postscript viewer (for EPS) should be available almost
           everywhere, GMV and Open DX are freely available for most Unix
           platforms. Povray is freely available for almost all
           platforms. AVS is a commercial program available for most
           Unix flavors. Tecplot is a commercial program available for
           Windows and most Unix platforms. HiVision is available for free after
           registration.
	   </p>
    </ul>

    <p>
    In case you didn't find your favorite graphics format above it
    might be of interest that it is quite simple to add it to the list
    of supported ones (take a look at
    base/include/base/data_out_base.h and
    base/source/data_out_base.cc to see how output formats are
    implemented), as only a simple intermediate format needs to be
    converted into a graphics format, without references to cells,
    nodes, types of finite elements, and the like. Since your
    preferred output format is likely to be similar to one for which
    we already have a backend, adaptation is usually simple. In case
    you write such a function, we would be happy to integrate it into
    the library.
    </p>



    <a name="installation">
    <h2>Installation</h2>

    <p>
    The whole library usually comes as a .tar.gz file, that is a
    tarred file archive which is compressed with gzip. After unpacking
    it with gunzip and tar (or <tt>tar xzf</tt> if you use GNU tar), you will
    find several subdirectories. First run the script 
    <pre><code>
         ./configure
    </code></pre>
    which sets some paths and finds out what compiler you
    use. ./configure supports several flags which are discussed
    further down <a href="#configuration-options">below</a>. 
    </p>

    <p>
    The most important result of <code>./configure</code> is the
    creation of the files <code>common/Make.global_options</code> and
    <code>base/include/base/config.h</code>. The first
    file contains compiler options, paths, etc which you may want to
    use in the <a href="development/index.html" target="_top">Makefiles
    of your own projects</a>. It is definitely a good
    idea to include it into your Makefile, to allow using the same
    flags for compilation between library files and the files of your
    project, and to access the paths of the library files. To find
    out about the supported flags, take a look at the file. Also,
    information about Makefiles can be found in the section on
    <a href="development/index.html" target="_top">development</a>.
    </p>

    <p>
    The second generated file contains a number of preprocessor
    definitions, that are mostly used to indicate the features and
    bugs of the compiler in use.
    </p>

    <p>
    After configuring, type `make', to obtain the following help (this
    output may change slightly over time, just try it): 

    <pre><code>
    ========================================================================
    =              Global Makefile for the deal.II libraries               =
    ========================================================================
    =                                                                      =
    = The following targets exist:                                         =
    =    baseg lacg : debug libraries "base" and "lac"                     =
    =    base lac   : debug and optimized libraries "base" and "lac"       =
    =    1dg 2dg 3dg: deal.II debug version for specified dimension        =
    =    1d 2d 3d   : deal.II debug and optimized for specified dimension  =
    =                                                                      =
    =    contrib    : additional libraries in contrib, if there are any    =
    =                                                                      =
    =    all        : base, lac, 1d, 2d and 3d, contrib                    =
    =    debug      : baseg, lacg, 1dg, 2dg and 3dg, contrib               =
    =    optimized  : base, lac, 1d, 2d, and 3d optimized libraries only   =
    =                                                                      =
    =    online-doc : generate the documentation in HTML format            =
    =    TODO       : create a "TODO" file from the source files           =
    =    TAGS       : create a TAGS file from include and source files     =
    =                                                                      =
    =    clean      : removes all object files, libraries, etc in subdirs  =
    ========================================================================
    </code></pre>

    <p>
    To execute one of the commands, type `make target-name'. Please
    note that building all libraries in debug and optimized mode
    presently takes about three hours on a Sun Ultra 450 (with 250 MHz),
    or about half an hour on a Pentium IV 1000 Mhz, so you may want to do
    this during lunchtime or night. Also, note that building all
    libraries requires 200-400 MB of free disk space (depending on
    platform).
    </p>

    <p>
    In case you have a multi-processor machine, you can call `make -j4
    target-name' to let `make' call multiple instances of the compiler
    (in this case four). Since the make files are written in a way to
    minimize cross-dependencies, this speeds up compilation by about
    the factor given after `-j', at least if you have as many
    processors. Note, however, that parallel makes will sometimes fail
    when compiling the library for the very first time (this is due to a
    bug in `make'); in that case, simply re-run `make', or run it
    without `-jN'.
    </p>

    <p>
    After `make' has finished, you will have two sets of
    libraries. The first consists of the files
    <ul>
      <li> <p><code>lib/libbase.a</code>: The library containing the
      code of the classes in the <code>/base</code> directory. These
      are mostly helper classes (such as output of various data in
      different data formats), and classes of general numerical
      interest (such as classes representing functions, tensors,
      etc.), but not very specifically about finite elements.
      </p>

      <li> <p><code>lib/liblac.a</code>: <code>lac</code> is the
      acronym for <i>L</i>inear <i>A</i>lgebra <i>C</i>lasses. This
      library contains classes representing vectors, matrices, sparse
      matrices, linear solvers, and the like.
      </p>

      <li> <p><code>lib/libdeal_II_2d.a</code>: This is the
      library containing all the classes representing finite element
      methods, such as grid handling, different finite elements,
      etc. Thus suffix <code>_2d</code> obviously indicates that this
      particularly library was compiled for two spatial dimensions,
      but if you told `make' to do so, there will also be libraries
      for one and three spatial dimensions.
      </p>
    </ul>
    </p>

    <p>
    For each library, there will also be another library with the
    suffix <code>.g.a</code> instead of <code>.a</code>. The
    difference between the two sets of libraries is the following:
    <ul>
      <li>
      <p>
      The <code>.g.a</code> versions contain debugging
      information. In fact the <code>.g</code> reminds us of the fact
      that gcc is called using the option <code>-g</code> to include
      debugging information into its output.
      </p>

      <p>
      Besides the debugging output the compiler puts into the output,
      the library contains a great number of assertions (presently
      about 3200) checking the validity of parameters to functions and
      internal states. These assertions have proven to be an
      invaluable means to finding programming bugs since they will
      almost always abort your program if something goes wrong. In our
      experience, more than ninety per cent of all errors are invalid
      parameters (such as vectors having the wrong size, etc) and they
      are usually found almost instantaneously displaying the file
      name and line number of where the problem occurred.
      </p>

      <p>
      You will want to link your programs against the
      <code>.g.a</code> versions of the libraries while developing
      your programs.
      </p>

      <li>
      <p>
      The <code>.a</code> libraries do not contain debugging
      information nor the assertions. For these reasons, they are much
      smaller and your program will run significantly faster (the
      performance penalty of the <code>.g.a</code> libraries is
      between a factor of two and four, depending on which parts of
      the libraries you use). Furthermore, these libraries are
      compiled with optimization options of the compiler.
      </p>

      <p>
      You will want to link your programs against these libraries when
      they run stable and are used in production mode.
      </p>
    </ul>
    If shared libraries were built instead of static ones, then the
    suffix <code>.a</code> is replaced by <code>.so</code>
    </p>

    <p>
    Apart from the libraries, you should generate the full set of
    documentation files, by typing `make online-doc'; this takes some
    minutes since quite a lot of information is generated and
    transformed in various ways, but this way, you
    have (almost) all the documentation locally on your computer and
    need not use the <acronym>deal.II</acronym> homepage in
    Heidelberg. You can access all documentation through <a
    href="documentation.html" target="body">this page</a>. (For
    obvious reasons, the only document that you don't have locally is
    the News page, and a few of the pages in the "Development"
    section, as they are re-generated nightly and carry the present
    development status of the library, rather than the status of the
    particular version of the library you have on your harddisk.
    You can access these pages through the 
    <a href="http://www.dealii.org" target="_top">global 
    homepage</a>.)
    </p>


    <a name="configuration-options"></a>
    <h3>Configuration options</h3>

    <a name="choose-compiler"></a>
    <h4>Changing the compiler</h4>

    If <code>configure</code> uses a wrong compiler, there are two
    options: first, you can prepend your search path by the directory
    of the desired compiler. If you do not want to do this (and there
    are reasons), try the following: If your full compiler paths are
    <tt>mycc</tt> and <tt>myc++</tt> for your C and C++ compilers,
    respectively, type into your <tt>csh</tt>:
    <pre>
      setenv CC  mycc
      setenv CXX myc++
      ./configure
    </pre>
    or into your <tt>bash</tt>
    <pre>
      export CC=mycc
      export CXX=myc++
      ./configure
    </pre>

    <p>
    The paths to these compilers are stored in the
    <code>common/Make.global_options</code> files, so the compilers
    are always used when compiling the library even if the environment
    variables are no more set later (for example if you are working
    within another window, or have unset the variables for other
    purposes).
    </p>


    <h4>Selecting optional behavior</h4>
    You can give several flags to ./configure:
    <ul>
    <li>
      <p>
      <code>--enable-shared</code>: Compile the files of deal.II into
      shared libraries, rather than statically linked
      libraries. Enabling this option saves disk space, link time and
      start-up time, so this is the default. However, some systems
      might not support shared libraries, in which case you should
      call ./configure with the parameter
      <code>--disable-shared</code>. (They are disabled by default on
      those systems for which we could not make them work. This
      applies to AIX, DEC Alpha stations running Linux and OSF1,
      CygWin Windows systems, and some other systems as
      well. Probably, there are simple solutions, but since we can't
      regularly test on these systems, we did not try very hard. If
      anyone would like to look into this, we would be pleased to
      offer advice.)
      </p>

      <p>
      It is important to note that the actual size of the executable
      program in memory will be larger than when linked statically,
      since the dynamic linker does not remove symbols which are not
      used, in contrast to the static linker. Therefore, more main
      memory will be used when running your applications, but link
      time is significantly reduced.      
      </p>

    <li>
      <p>
      <code>--enable-multithreading</code>: This sets compiler
      variables such that the resulting program supports
      multi-threading. Basically, for this, different system include
      files have to be selected (gcc option -threads) and memory
      allocation has to be made thread-safe; the latter can be done
      for the C++ standard containers in gcc versions prior to 3.0 by
      defining <code>-D__USE_MALLOC</code>. Note also that 
      gcc's runtime library was not thread-safe prior to gcc 3.x
      unless you configured gcc 
      with <code>--enable-threads</code> and recompiled it. Using a gcc
      that was not configured with this option may lead to errors in
      your threaded programs that are extremely hard to find. Newer
      versions of gcc and their standard libraries are thread-safe by 
      default.
      </p>

    <li>
      <p>
      <code>--with-multithreading=name</code>: enabling
      multi-threading as shown above does not enable multi-threading
      inside the library itself, it just sets the compiler flags to make
      the generated code thread-safe. However, there are many places in the
      library and example programs
      where multi-threading can be used, and you can switch to
      multi-threading using this configure option.
      </p>

      <p>
      We used to support two different ways to achieve multi-threading in a
      cross-platform way, which were selected by the argument given to
      <code>--with-multithreading=name</code>. Since after <acronym>deal.II--
      3.4</code> we dropped support for 
      the <a href="http://www.cs.wustl.edu/~schmidt/ACE.html"
      target="_top">ACE (Adaptive Communications Environment)</a>
      library for cross-platform portability, there remains only one valid
      value for this option:
      <ul>
        <li> <code>name=posix</code>: use POSIX functions to start threads and
	to implement mutex, condition variable, and barrier
        data structures. Most systems today support POSIX, so this
        should be fairly portable.
      </ul>
      If no argument is given to <code>--with-multithreading</code>, then 
      POSIX is assumed. In other words, giving any particular value to this
      flag is redundant. However, you still need to give this flag (with or
      without value) upon configuration if you want to use multithreading.
      </p>

      <p>
      Note that the library tries to detect the number of processors
      in your system in multi-threaded mode, to determine a default
      number of threads to start in some situations. We presently
      support this detection only on Linux, Solaris, OSF, and SGI
      systems.
      </p>

    <li>
      <p>
      <code>--with-doxygen=...</code>: usually, <code>./configure</code> is
      able to figure out the path to the doxygen program by itself. However,
      if you have multiple versions installed and want to select a specific
      one, then you may want to specify path and filename to this version by
      using the <code>--with-doxygen</code> flag.
      </p>

    <li>
      <p>
      <code>--enable-compat-blocker=...</code>: the library offers
      various functions that maintain compatibility with older
      versions of <acronym>deal.II</acronym>, for example many
      functions that assume that the mapping between unit and real
      cell is a (bi-, tri-)linear one. There are respective functions
      that take a mapping object, and the compatibility functions
      simply call these with a Q1 mapping object.
      </p>
      
      <p>
      When converting old programs, and also sometimes with new
      programs, you may want to make sure that these compatibility
      functions are not called, to ensure that the mapping taken is
      always the same. In that case, you can configure the library
      with the flag
      <code>--enable-compat-blocker=mapping</code>. After
      recompilation of the library, each access to these functions is
      blocked, and an exception is thrown.
      </p>  

      <p>
      In later versions of the library, other compatibility blockers
      will be implemented as well, as we extend the functionality of
      the library.
      </p>
    </ul>

    <p>
    Please note that running ./configure stores the paths to some
    programs, such as the compilers or the Perl interpreter. The
    compiler which will be used when compiling the library (or your
    own application) is therefore selected at the time of
    configuration and independent of the present setting of your $PATH
    environment value. The reason for this is that presently there are
    still too many incompatibilities between different versions of
    compilers and that compiling different parts of programs with
    different compilers often leads to hard-to-find problems. By
    storing the absolute paths of compilers, we can at least catch
    those problems where different compiler revisions are located in
    different directories.
    </p>

    <p>
    If you want to use a new compiler version, you will therefore have
    to re-run ./configure with the new compiler being in the $PATH
    environment variable.
    </p>

    <p>
    It is in general a good idea to run `make clean'
    before re-configuring.
    </p>


    <a name="optional-software">
    <h4>Optional Software Support</h4>

    <p> <acronym>deal.II</acronym> comes with built-in support for an
    increasing number of external software packages. These packages are
    sometimes detected automatically, sometimes they must be enabled explicitly
    during configuration by adding the option <tt>--with-package</tt>.
    </p>

    <p>These supported software packages comprise (the following list contains
    trademarks belonging to their owners):
    </p>

    <dl>
    <dt>TECPLOT</dt>
    <dd>Autodetected if one of the variables <tt>$TECHOME</tt>,
    <tt>$TEC80HOME</tt> or <tt>$TEC90HOME</tt> points to a valid installation
    of the tecio library. If enabled, allows data output in TECPLOT format.
    </dd>

    <dt>UMFPACK</dt>
    <dd>Enabled by <tt>--with-umfpack</tt>. Right now, only the included
    version in the contrib directory is supported, but pre-installed versions
    will be supported soon by using an argument to this option. Enabling
    UMFPACK adds the class <tt>SparseDirectUMFPACK</tt> to the library.
    Implies <tt>--with-blas</tt>
    </dd>

    <dt>Petsc</dt>
    <dd></dd>

    <dt>Metis</dt>
    <dd></dd>

    <dt>BLAS</dt>
    <dd>Enabled by <tt>--with-blas=blasname</tt>. Requires
    <tt>libblasname.a/so</tt> in your linkers seach path. It will add the
    library and required FORTRAN libraries to the linker calls. BLAS
    subroutines are not used within <acronym>deal.II</acronym>.
     </dd>
    </dl>

    <a name="compiler-flags">
    <h4>Compiler flags</h4>

    <p>
    Since the ISO C++ standard is still quite new and compilers still
    change a lot, you might need to provide special options for the
    compiler. We have tried to automatize this process using the
    ./configure script at least for the gcc compilers we use. If you need
    additional flags, try the following two ways:
    </p>

    <ul>
    <li> <p>
    Set environment variables before configuring. If you want to add
    a flag to produce <code>gprof</code> output, for instance, configure
    the package using the following command sequence:
    <pre>
      setenv CXXFLAGS -pg
      setenv LDFLAGS -pg
      configure &lt;configure-options&gt;
    </pre>
    These are the commands for <tt>csh</tt>. They have to be changed
    accordingly for <tt>bash</tt>
    </p>

    <li> 
    <p>
    If that does not work, edit the file
    common/Make.global_options.in and rerun ./configure in the
    top-level directory, or change the file 
    common/Make.global_options, which is what ./configure generates
    out of common/Make.global_options.in.
    </p>
    </ul>

    <p>
    The first method is preferred, since it will be easier to
    incorporate it into the configuration script later. Furthermore,
    your version of <acronym>deal.II</acronym> will not be changed
    from the original.
    </p>

    <p>
    We would like to hear about necessary or useful modifications so
    that we can include them into the distribution. If you feel that
    certain flags should be included always (for example because this
    results in significantly better optimizations), then it might be
    interesting to modify the <code>aclocal.m4</code> file in the
    top-level directory and send us your changes.
    </p>


    <a name="external-libs">
    <h2>Using third-party libraries and subroutines</h2>

    <p>
    <acronym>deal.II</acronym> is able to interface some external 
    libraries and subroutines for special purposes inside the library
    or application programs built on
    <acronym>deal.II</acronym>. Presently supported are the following:

    <ul>
      <li>
      <p>
      <acronym>deal.II</acronym> can interface to the <a
      href="http://www.mcs.anl.gov/petsc/" target="_top">PETSc</a>
      library. PETSc's main strength is to provide lots of functions for
      linear algebra, among several other things. It comes with
      implementations of a variety of linear solvers, as well as various
      different sparse and dense matrix and vector formats, for which
      <acronym>deal.II</acronym> has wrapper classes that provide almost the
      same interfaces as the built-in <acronym>deal.II</acronym> linear
      algebra classes. The main advantage of PETSc is the variety of its
      algorithms, and that all of them can work in a parallel setting,
      i.e. matrices and vectors can be distributed across a cluster of
      computers that communicate via MPI. This makes PETSc the choice of
      linear algrebra implementations for very large problems that do not fit
      into a single computer's memory or have run-times that are too long for
      a single computer. At present, our interfaces are only wrappers for
      vector and matrix formats, as well as to their solver and preconditioner
      classes. However, we plan to extend this to a tighter coupling in the
      future.
      </p>

      <p>
      The use of PETSc is optional, since <acronym>deal.II</acronym> comes
      with a complete implementation of linear algebra classes
      itself. However, if you wish to use the PETSc wrappers, you can do so by
      having a PETSc installation around at the time of calling
      <code>./configure</code>. PETSc usually requires you to set the
      environment variables <code>PETSC_DIR</code> and <code>PETSC_ARCH</code>
      to a path to PETSc and denoting the architecture for which PETSc is
      compiled. If these environment variables are set, then
      <acronym>deal.II</acronym> will pick them up during configuration, and
      store them. It will then also recognize that PETSc shall be used, and
      enable the wrapper classes (they are disabled by default, if PETSc is
      unavailable). However, you can override the values of these environment
      variablaes by using the <code>--with-petsc=DIR</code> and
      <code>--with-mpi-arch=ARCH</code> switches to <code>./configure</code>.
      </p>

      <p>
      Note that in order to use PETSc with <acronym>deal.II</acronym>, you
      need to have at least PETSc version 2.2.0 installed. Version 2.1.6 may
      work in most cases, but you will get some (harmless) warnings during
      compilation. Also, during testing with this version, we discovered a
      serious bug in the TCQMR linear solver which basically renders it
      useless. All these problems have been reported and are supposed to be
      fixed in 2.2.0. Versions prior to 2.1.6 are likely not to work, but have
      not been tested.
      </p>


      <li>
      <p>
      In order to generate partitionings of triangulations, we have functions
      that call <a href="http://www-users.cs.umn.edu/~karypis/metis/index.html"
      target="_top">METIS</a> library. METIS is a function that provides
      various methods to partition graphs, which we use to define which cell
      belongs to which part of a triangulation. The main point in using METIS
      is to generate partitions so that the interfaces between cell blocks are
      as small as possible. This data can, in turn, be used to distribute
      degrees of freedom onto different processors when using PETSc in
      parallel mode.
      </p>

      <p>
      As with PETSc, the use of METIS is optional. If you wish to use it, you
      can do so by having a METIS installation around at the time of calling
      <code>./configure</code>. You can let <code>./configure</code> know
      about this by either setting a <code>METIS_DIR</code> environment
      variable denoting the path to the METIS library, or by transmitting this
      information to <code>./configure</code> using the
      <code>--with-metis</code> flag. We have tested our interface code with
      METIS version 4.0.1, and newer versions should presumable work as well.
      </p>
      
      <p>
      Using METIS requires some editing though: in the METIS header
      <code>Lib/proto.h</code> that is automatically include from METIS's main
      header <code>Lib/metis.h</code>, a number of functions from the C
      standard lib are declared with signatures that differ from the ones in
      the system headers (that alone is a good reason not to ever declare
      system functions yourself, but oh well...) in that they do not have
      exception specifications that are given in the system headers. With some
      compilers, you will then get compilation errors on one or two deal.II
      files. It is easy to work around this by first compiling METIS, then
      trying to compile deal.II, and then simply remove each function
      signature which the compiler complains about. The ones most likely
      affected are <code>srand48()</code>, <code>drand48()</code>, and
      <code>log2</code>. Since you have already compile METIS and deal.II does
      not need these function declarations itself, just removing their
      declarations should not be a problem.
      </p>


      <li>
      <p>
      It is possible to use some subroutines from the
      <a href="http://www.cse.clrc.ac.uk/Activity/HSL"
      target="_top">Harwell Subroutine Library (HSL)</a> to make use
      of some sparse direct solvers. For a description of how to
      include these functions, see
      <a href="external-libs/hsl.html" target="body">this page</a>.
      </p>
      
      <li>
      <p>
      Deal.II supports writing <a href="http://www.amtec.com">Tecplot</a>
      binary files directly. For this feature to work properly be sure that the
      environment variable TECHOME points to a valid Tecplot installation and that
      the files $TECHOME/include/TECIO.h and $TECHOME/lib/tecio.a exist.
      </p>
    </ul>
    </p>


    <a name="problems">
    <h2>Problems, questions, mailing lists</h2>

    <p>
    Some information beyond what is covered in the documentation of
    the library may be found on the
    <a href="http://www.dealii.org" target="_top">homepage of
    <acronym>deal.II</acronym></a>, or in the
    <a href="faq.html" target="body">Frequently Asked Questions</a> section.
    If you don't find anything there,
    feel free to ask if you have any problems with deal.II. If a
    question is of general interest, you may want to use our mailing list,
    which can be reached at
    <a href="mail.html" target="body"><b>dealii@dealii.org</b></a> 
    and of which
    <a href="http://www.dealii.org/mail/maillist.html" target="body">
    previous mails</a> are also archived online. Before writing to the
    list, you will have to subscribe to it.
    </p>

    <p>    
    You can <B>subscribe</B> to this list by writing email to <a
    href="mailto:list-server@dealii.org"><b>list-server@dealii.org</b></a>
    with the text (not in the subject!)
    <pre>
      subscribe deal
    </pre>
    The list server also understands the command <TT>help</TT> given
    on a line by itself.
    </p>
  
    <p>
    For specific problems, send email to either
    <tt>Wolfgang.Bangerth</tt>, <tt>Ralf.Hartmann</tt>,
    <tt>Guido.Kanschat</tt>, or simply <tt>authors</tt> at
    <tt>dealii.org</tt>.
    </p>

    <p>
    We are interested in any feedback, whether positive or negative,
    in order to determine the directions of future work on the
    library. We are also very much interested in incorporating any
    work and bug fixes by third parties into the library. Of course,
    you will be credited for this on our home page.
    </p>


    <a name="license">
    <h2>License</h2>

    <p>
    We have placed <acronym>deal.II</acronym> under an <a
    href="http://www.opensource.org" target="_top">Open Source</a>
    license, which allows you to use the library free of charge. You
    are guaranteed full access to the source code and are encouraged
    to help in the further development of the library.  Follow <a
    href="license.html" target="body">this link</a> to read the full
    text of the license,
    </p>

    <p>
    The basics of the license are in short:
    <ul>
      <li>
         The library comes free of charge for all users, but
         we keep a copyright in it. We will grant everyone access to
         the library and its source code, provided they keep to the
         <a href="license.html" target="body">license</a>.

      <li>
        The libraries may not be stripped of our copyright. We would
        appreciate being contacted if you want to use the library
        commercially.

      <li>
        Scientific publications presenting results obtained with these
        libraries should acknowledge the use of the library and name
        its principal authors (at present Wolfgang Bangerth, Ralf
        Hartmann and Guido Kanschat). Citation of the reports named on
        the homepage is appreciated.
    </ul>

    Note that since our institutes are evaluated at regular intervals,
    we are interested in documenting the use of the programs and
    libraries we create. We are therefore interested in collecting
    publications with results obtained with the aid of these libraries
    and would therefore like to ask you to drop us a note about every
    such publication. Your publication will then be listed on the
    project homepage.


    <hr>
    
    <address>
      <a href="mail.html" target="body">The deal.II mailing list</a>
      $Date$
    </address>
  </body>
</html>
